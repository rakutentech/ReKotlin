<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>compositeStore</title>
<link href="../../../../images/logo-icon.svg" rel="icon" type="image/svg"><script>var pathToRoot = "../../";</script><script type="text/javascript" src="../../scripts/sourceset_dependencies.js" async="async"></script><link href="../../styles/style.css" rel="Stylesheet"><link href="../../styles/logo-styles.css" rel="Stylesheet"><link href="../../styles/jetbrains-mono.css" rel="Stylesheet"><link href="../../styles/main.css" rel="Stylesheet"><script type="text/javascript" src="../../scripts/clipboard.js" async="async"></script><script type="text/javascript" src="../../scripts/navigation-loader.js" async="async"></script><script type="text/javascript" src="../../scripts/platform-content-handler.js" async="async"></script><script type="text/javascript" src="../../scripts/main.js" async="async"></script>  </head>
  <body>
    <div id="container">
      <div id="leftColumn"><a href="../../index.html">
          <div id="logo"></div>
        </a>
        <div id="paneSearch"></div>
        <div id="sideMenu"></div>
      </div>
      <div id="main">
        <div id="leftToggler"><span class="icon-toggler"></span></div>
<script type="text/javascript" src="../../scripts/main.js"></script>        <div class="main-content" id="content" pageIds="rekotlin::org.rekotlin//compositeStore/#kotlin.Array[org.rekotlin.Store[*]]#kotlin.collections.List[kotlin.Function2[kotlin.Function1[org.rekotlin.Dispatchable,kotlin.Unit],kotlin.Function0[TypeParam(bounds=[kotlin.Any?])?],kotlin.Function1[kotlin.Function1[org.rekotlin.Dispatchable,kotlin.Unit],kotlin.Function1[org.rekotlin.Dispatchable,kotlin.Unit]]]]#kotlin.Boolean#kotlin.Function1[kotlin.Array[org.rekotlin.Store[*]],TypeParam(bounds=[kotlin.Any?])]/PointingToDeclaration//-1950702949">
          <div class="navigation-wrapper" id="navigation-wrapper">
            <div class="breadcrumbs"><a href="../../index.html">rekotlin</a>/<a href="index.html">org.rekotlin</a>/<a href="composite-store.html">compositeStore</a></div>
            <div class="pull-right d-flex">
              <div id="searchBar"></div>
            </div>
          </div>
          <div class="cover ">
            <h1 class="cover"><span>composite</span><wbr></wbr><span>Store</span></h1>
          </div>
<div class="divergent-group" data-filterable-current=":rekotlin:dokkaHtml/main" data-filterable-set=":rekotlin:dokkaHtml/main"><div class="with-platform-tags"><span class="pull-right"></span></div>

  <div>
    <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-depenent-content" data-active="" data-togglable=":rekotlin:dokkaHtml/main"><div class="symbol monospace">fun &lt;<a href="composite-store.html">State</a>&gt; <a href="composite-store.html">compositeStore</a>(vararg stores: <a href="-store/index.html">Store</a>&lt;*&gt;, middleware: <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html">List</a>&lt;<a href="index.html#1802360814%2FClasslikes%2F-1950702949">Middleware</a>&lt;<a href="composite-store.html">State</a>&gt;&gt; = emptyList(), skipRepeats: <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html">Boolean</a> = true, compose: <span data-unresolved-link="org.rekotlin/Compose///PointingToDeclaration/">Compose</span>&lt;<a href="composite-store.html">State</a>&gt;): <a href="-store/index.html">Store</a>&lt;<a href="composite-store.html">State</a>&gt;<span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
<p class="paragraph">Factory function to create a composite store.</p><p class="paragraph">A composite store aggregates the states of all the composed stores (also referred to as &quot;original stores&quot; to clearly differentiate composed vs composite). The composite store doesn't have a state &amp; reducer of its own. It keeps a projection of all the states of the composed stores.</p><div class="sample-container"><code class="" theme="idea"><pre>+---------+                  +-----------------+<br>| Store 1 | -- state 1 ---&gt;  | Composite Store |<br>+---------+                  |                 |<br>                             |   | state 1 |   |<br>+---------+                  |   | state 2 |   |                        +------------+<br>| Store 2 | -- state 2 ---&gt;  |   v state 3 v   | -- composite state --&gt; | subscriber |<br>+---------+                  |                 |                        +------------+<br>                             | =v= compose =v= |<br>+---------+                  |                 |<br>| Store 3 | -- state 3 ---&gt;  | composite state |<br>+---------+                  +-----------------+</pre></code></div><h3 class=""> Composite Store State</h3><p class="paragraph">Whenever state changes in one of the original stores the composite store updates its state projection and notifies all of its subscribers.</p><h3 class=""> Actions &amp; Effects</h3><p class="paragraph"><a href="-action/index.html">Action</a>s and <a href="-effect/index.html">Effect</a>s dispatched to the composite store propagate to the original stores (store 1, 2 and 3 in the diagram above).</p><p class="paragraph">The composite store is not aware of <a href="-action/index.html">Action</a>s dispatched to one of the composed stores, however it will notice state changes that result from those actions.</p><p class="paragraph"><a href="-effect/index.html">Effect</a>s dispatched to composed stores will propagate to subscribers of the composite store.</p><h3 class=""> Middlewares</h3><p class="paragraph">The composite store holds its own middlewares. These middlewares only act on <a href="-action/index.html">Action</a>s dispatched to the composite store, never on <a href="-action/index.html">Action</a>s that are only dispatched to one of the original stores. For example when you dispatch an action to store 1 (in the diagram above) the middlewares in the composite store will not act on that action, only the middlewares of store 1.</p><p class="paragraph">In other words:</p><ul><li><p class="paragraph">composing stores creates a hierarchy of middlewares.</p></li><li><p class="paragraph">composing stores enables isolation of middlewares.</p></li></ul><h3 class=""> Usage examples</h3><div class="sample-container"><code class="" theme="idea"><pre>val featureStore: Store&lt;FeatureState&gt; =  // store specific to your feature.<br>                                         // may have feature specific middleware.<br>val authStore: Store&lt;AuthStare&gt;       =  // shared login state store.<br><br>data class CompositeState(val auth: AuthState, feature: FeatureState)<br>val compositeStore: Store&lt;Pair&lt;AuthState, FeatureState&gt;&gt; = composeStores(<br>             authStore,<br>             featureStore,<br>             thunkMiddleware()<br>) { authState, featureState -&gt;<br>     CompositeSate(authState, featureState)<br>}<br>// in the auth feature<br>authStore.dispatch(LogoutAction)<br>compositeStore.dispatch(FeatureAnimationEffect)</pre></code></div><h3 class=""> Modularized Applications</h3><p class="paragraph">Composite store allows you to break down the global state model into sub-states and compose them at runtime. This enables you to break applications into multiple modules, with Redux broken down at module boundaries. But the stores are still integrated in the sense that they can send <a href="-dispatchable/index.html">Dispatchable</a> to all subscribers of stores that are composed.</p><p class="paragraph">For example a base module can contain shared behavior (like authentication state) and feature modules can compose on top of that. So the stores in the code snippet above could live in different modules.</p><div class="sample-container"><code class="" theme="idea"><pre>+- Base Module ---+                  +- Feature 1 Module ------+<br>| owns authStore ------ inject ----&gt; | create compositeStore 1 |<br>+------- | -------+                  +-------------------------+<br>         |<br>         |                           +- Feature 2 Module ------+<br>         +------------- inject ----&gt; | create compositeStore 2 |<br>                                     +-------------------------+</pre></code></div><p class="paragraph">Both feature modules can react to auth state or send actions &amp; effects to the authStore (via their feature-local composite store).</p><h2 class="">See also</h2><div data-togglable="See also"><div class="platform-hinted WithExtraAttributes" data-platform-hinted="data-platform-hinted" data-togglable="See also"><div class="content sourceset-depenent-content" data-active="" data-togglable=":rekotlin:dokkaHtml/main"><div data-togglable="See also"><div class="table" data-togglable="See also"><div class="table-row" data-filterable-current=":rekotlin:dokkaHtml/main" data-filterable-set=":rekotlin:dokkaHtml/main"><div class="main-subrow keyValue WithExtraAttributes RowTitle"><div class=""><span class="inline-flex"><a href="compose-stores.html">composeStores</a></span><span class="inline-flex"><div data-togglable="See also"></div></span></div><div></div></div></div></div></div></div></div></div></div>
        </div>
        <div class="footer"><span class="go-to-top-icon"><a href="#content"></a></span><span>Â© 2021 Copyright</span><span class="pull-right"><span>Generated by </span><a href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span></div>
      </div>
    </div>
  </body>
</html>

